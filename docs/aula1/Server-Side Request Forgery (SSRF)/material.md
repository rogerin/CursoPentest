# Conversores de HTML para PDF, dá para hackear?

## Resumo

Este artigo apresenta uma breve avaliação realizada em um conjunto de bibliotecas que permitem a conversão de código HTML para PDF. O objetivo é investigar quais tipos de vulnerabilidades podem ser inseridas em um software através do uso de bibliotecas com a funcionalidade supracitada.

## Tópicos Abordados

* **O que avaliar:** 
    * Lista de perguntas para serem respondidas contra cada uma das bibliotecas elencadas.
* **Ambiente de testes:** 
    * Descrição do ambiente utilizado para realizar os testes.
* **Como avaliar:** 
    * Detalhes sobre as metodologias utilizadas para avaliar as bibliotecas.
* **Resultados:** 
    * Tabela com os resultados dos testes realizados em cada biblioteca.
* **Recomendações de Segurança:** 
    * Dicas para se proteger contra as vulnerabilidades encontradas.
* **Referências:** 
    * Lista de links para recursos utilizados na pesquisa.

## Tabela de Resultados

| Biblioteca      | Permitir Javascript | Desabilitar Javascript | DoS (sleep) | DoS (loop) | SSRF  | Limite de Requisições | Leitura de Arquivos |
|-----------------|---------------------|------------------------|-------------|------------|-------|----------------------|---------------------|
| Flying Saucer   | false               | n/a                    | n/a         | n/a        | n/a   | n/a                  | n/a                 |
| WeasyPrint      | false               | n/a                    | n/a         | n/a        | n/a   | n/a                  | n/a                 |
| Node-HTML-PDF   | true                | false                  | true        | true       | true  | false                | true                |
| go-wkHTML       | true                | false                  | true        | true       | true  | false                | true                |
| DinkToPDF       | true                | false                  | true        | true       | true  | false                | true                |
| wkHTML          | true                | true                   | true        | true       | true  | false                | true                |
| PDFKit          | true                | false                  | true        | true       | true  | false                | true                |
| DomPDF          | false               | n/a                    | n/a         | n/a        | n/a   | n/a                  | n/a                 |


**Legenda:**

* true: a biblioteca está vulnerável.
* false: a biblioteca não está vulnerável.
* n/a: o teste não se aplica.

## Recomendações de Segurança

* **Realizar validação e filtragem dos dados recebidos pelo usuário.**
* **Utilizar Sandbox para restringir o acesso e as permissões da biblioteca.**
* **Caso não seja necessário, e a biblioteca permita, desabilitar a execução de Javascript.**
* **Manter a biblioteca atualizada.**

## Conclusões

A pesquisa encontrou diversas vulnerabilidades em bibliotecas populares de conversão de HTML para PDF. É importante que os desenvolvedores estejam cientes dessas vulnerabilidades e tomem medidas para mitigá-las. As recomendações de segurança acima podem ajudar a proteger os aplicativos contra ataques.

## Observações

* Este é apenas um resumo do artigo original. Para mais detalhes, consulte o artigo completo.
* As informações neste resumo são para fins informativos e não devem ser consideradas como conselhos de segurança.

## Links Úteis

* Artigo original: [https://www.sidechannel.blog/en/html-to-pdf-converters-can-i-hack-them/](https://www.sidechannel.blog/en/html-to-pdf-converters-can-i-hack-them/)
* Recomendações de segurança da DomPDF: [https://github.com/dompdf/dompdf/wiki/Securing-dompdf](https://github.com/dompdf/dompdf/wiki/Securing-dompdf)


